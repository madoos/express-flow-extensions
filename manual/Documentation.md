# Documentation
<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [pipe][1]
    -   [Parameters][2]
    -   [Examples][3]
-   [enableReturn][4]
    -   [Parameters][5]
    -   [Examples][6]
-   [withStatus][7]
    -   [Parameters][8]
    -   [Examples][9]
-   [flow][10]
    -   [Parameters][11]
    -   [Examples][12]
-   [createRouter][13]
    -   [Parameters][14]
    -   [Examples][15]
-   [projection][16]
    -   [Parameters][17]
    -   [Examples][18]
-   [middleware][19]
    -   [Parameters][20]
    -   [Examples][21]
-   [background][22]
    -   [Parameters][23]
    -   [Examples][24]

## pipe

Composes synchronous and asynchronous functions, returning as a final result a promise.

### Parameters

-   `fns` **...[Function][25]** functions to compose.

### Examples

```javascript
const plus = (n) => n + 1
const asyncDouble = (n) => Promise.resolve(n*2)
const result = await pipe(plus, asyncDouble)(2) // => 4
```

Returns **[Function][25]** 

## enableReturn

Allows to use synchronous or asynchronous functions with return to respond with the express response object.

### Parameters

-   `handler` **([Function][25] \| [Array][26] \| [Object][27])** 

### Examples

```javascript
// Using function

const handler = enableReturn((req) => `foo ${req.params.baz}` )
app.get('/', handler)
// in get request '/baz', server response 'foo baz'

// Using Array

const handlers = enableReturn([(req) => `foo ${req.params.baz}`])
app.get('/', handler[0])
// in get request '/baz', server response 'foo baz'

// Using Object

const handlers = enableReturn({
     baz: (req) => `foo ${req.params.baz}`
})

app.get('/', handler.baz)
// in get request '/baz', server response 'foo baz'

 // Configure response to get more information see Usage Custom response

const handlers = enableReturn((req) => `foo ${req.params.baz}`, { type: 'get'})

app.get('/', handler.baz)
// in get request '/baz', server response 'foo baz'
```

Returns **[Function][25]** requestHandler Response with res object.

## withStatus

return status with a declarative style

### Parameters

-   `descriptor` **[Object][27]** object with a set of conditions to test data with
-   `data` **[Object][27]** object to test descriptor conditions

### Examples

```javascript
flow(..., withStatus({
  200: R.complement(R.isEmpty) // <- will return 200 if data is not empty
  ...
}))
```

Returns **[Object][27]** containing data and first status that matched its condition

## flow

Compose sync or async functions and respond using the object of express.
If the request is successful send as status code 200 otherwise status code 500 and message error.

### Parameters

-   `fns` **...[Function][25]** 

### Examples

```javascript
const getNumberInParam = (req) => req.params.n
const plus = (n) => n + 1
const asyncDouble = (n) => Promise.resolve(n*2)
const handler = flow(getNumberInParam, plus, asyncDouble)

app.get('/', handler) // in get request '/2', server response 6
```

Returns **[Function][25]** Composed handler

## createRouter

Create an express router object adding the specified routes for each object.

### Parameters

-   `routes` **[Array][26]&lt;[Object][27]>** 

### Examples

```javascript
const api = createRouter([{
   method: 'GET',
   path: '/:bar',
   handler: (req, res) => {
      res.send(req.params.bar)
   }
 }])

app.use('api', apiRouter)
```

Returns **[Object][27]** Express Router instance

## projection

Transforms the keys of one object into another, it is very useful to obtain data from the request object. the method is currified.

### Parameters

-   `descriptor` **[Object][27]** 
-   `src` **[Object][27]** 

### Examples

```javascript
const descriptor = {
     id: 'req.params.id',
     age: 'req.body.age',
     isAdult: (req) => req.body.age > 18
 }
 const data = projection(descriptor, req)

// Using curry

 const data = projection({
     id: 'req.params.id',
     age: 'req.body.age',
     isAdult: (req) => req.body.age > 18
 })(req)
```

Returns **[Object][27]** The object modeled with the descriptor paths.

## middleware

Create a express middleware.

### Parameters

-   `definition` **[Object][27]** { handler, target, getter }
    -   `definition.handler` **[Function][25]** Async or sync function to put into middleware.
    -   `definition.target` **[String][28]** Property name to add to request object.
    -   `definition.getter` **([Function][25] \| [String][28])** Property or function to get data ass argument to pass to the handler function.

### Examples

```javascript
const isAdult = (age) => age > 18

const validateAge = middleware({
     handler: isAdult,
     getter: 'params.age',
     target: '__is_adult__'
})

app.get('/:age', validateAge, (req, res) => res.send(req.__is_adult__))
// in get request '/21', server response true
```

Returns **[Function][25]** Express middleware.

## background

Execute a function in background (is an alias for tap combinator).

### Parameters

-   `f` **[Function][25]** 

### Examples

```javascript
const getNumberInParam = (req) => req.params.n
const plus = (n) => n + 1
const asyncDouble = (n) => Promise.resolve(n*2)
const handler = flow(getNumberInParam, plus, asyncDouble)

app.get('/', flow(
 getNumberInParam,
 plus,
 background((n) => console.log('result of plus:', n))
 asyncDouble
))
```

Returns **[Function][25]** 

[1]: #pipe

[2]: #parameters

[3]: #examples

[4]: #enablereturn

[5]: #parameters-1

[6]: #examples-1

[7]: #withstatus

[8]: #parameters-2

[9]: #examples-2

[10]: #flow

[11]: #parameters-3

[12]: #examples-3

[13]: #createrouter

[14]: #parameters-4

[15]: #examples-4

[16]: #projection

[17]: #parameters-5

[18]: #examples-5

[19]: #middleware

[20]: #parameters-6

[21]: #examples-6

[22]: #background

[23]: #parameters-7

[24]: #examples-7

[25]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[26]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[27]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[28]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String
